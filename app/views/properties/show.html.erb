<h1 class="mb-4"><%= @property.name %></h1>

<div class="container">
  <div class="row">
    <!-- Property Image Section -->
    <div class="col-md-6">
      <% if @property.image_url.present? %>
        <img src="<%= @property.image_url %>" class="img-fluid mb-3" alt="<%= @property.name %>">
      <% else %>
        <img src="https://via.placeholder.com/500" class="img-fluid mb-3" alt="Default property image">
      <% end %>
    </div>

    <!-- Property Details Section -->
    <div class="col-md-6">
      <h3>Description</h3>
      <p><%= @property.description %></p>

      <!-- Price and Address -->
      <h4>Price: <%= number_to_currency(@property.price_per_night) %> per night</h4>
      <h5>Address: <%= @property.address %></h5>
      <h5>Rating: <%= @property.rating %></h5>

      <!-- Buttons -->
      <div class="mt-3">
        <% if current_user == @property.user %>
          <%= link_to 'Edit Property', edit_property_path(@property), class: 'btn btn-warning' %>
        <% end %>
      </div>

      <div class="mt-3">
        <%= link_to 'Back to Properties', properties_path, class: 'btn btn-secondary' %>
      </div>

      <div class="mt-3">
        <%= link_to 'Book Now', new_property_booking_path(@property), class: 'btn btn-outline-primary btn-lg' %>
      </div>

      <div class="mt-3">
        <% if current_user == @property.user %>
          <%= button_to 'Delete Property', property_path(@property), method: :delete, class: 'btn btn-danger', data: { confirm: 'Are you sure you want to delete this property?' } %>
        <% end %>
      </div>
  </div>
  </div>

    <!-- Map Section -->
  <div class="row">
    <div class="col-12">
      <div class="map-container rounded"
        style="width: 100%; height: 600px; border: 1px solid #ddd;"
        data-controller="map"
        data-map-markers-value="<%= @markers.to_json %>"
        data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">
      </div>
    </div>
  </div>
</div>
